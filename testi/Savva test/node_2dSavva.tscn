[gd_scene load_steps=7 format=3 uid="uid://bt5lhbj7o867v"]

[ext_resource type="Texture2D" uid="uid://iw2utkc3dacv" path="res://Untitled.png" id="1_xoq75"]
[ext_resource type="Texture2D" uid="uid://bwo7eif358u5" path="res://sprites/Näyttökuva_27-9-2025_164557_www.piskelapp.com-removebg-preview.png" id="2_ch7qq"]
[ext_resource type="Texture2D" uid="uid://clwyt2rcuiiy" path="res://sprites/Näyttökuva_27-9-2025_172950_www.piskelapp.com-removebg-preview.png" id="3_fj2o7"]
[ext_resource type="Texture2D" uid="uid://tgkswsje1l7u" path="res://sprites/left.png" id="4_gdeo8"]

[sub_resource type="GDScript" id="GDScript_y32ns"]
resource_name = "Player_test"
script/source = "extends CharacterBody2D

var Bullet = preload(\"res://Savva test/Bullet.tscn\")
@export var speed = 400

var active_marker: Marker2D
func _ready():
	active_marker = $ScopeDown

func get_input():
	var input_direction = Input.get_vector(\"left\", \"right\", \"up\", \"down\")
	velocity = input_direction * speed
	
func _physics_process(delta):
	get_input()
	move_and_slide()

func _input(event: InputEvent) -> void:
	if Input.is_action_just_pressed(\"up\"):
		$characterGoDown.hide()
		$characterGoSideways.hide()
		$characterGoUp.show()
		active_marker = $ScopeUp
		
	elif Input.is_action_just_pressed(\"down\"):
		$characterGoDown.show()
		$characterGoSideways.hide()
		$characterGoUp.hide()
		active_marker = $ScopeDown
		
	elif Input.is_action_just_pressed(\"right\"):
		$characterGoDown.hide()
		$characterGoUp.hide()
		$characterGoSideways.show()
		$characterGoSideways.flip_h = true
		active_marker = $ScopeRight
		
	elif Input.is_action_just_pressed(\"left\"):
		$characterGoSideways.show()
		$characterGoUp.hide()
		$characterGoDown.hide()
		$characterGoSideways.flip_h = false
		active_marker = $ScopeLeft
		
		
	elif Input.is_action_just_pressed(\"shoot\"):
		shoot()

func shoot():
	var b = Bullet.instantiate()
	get_tree().current_scene.add_child(b)
	b.global_transform = active_marker.global_transform
"

[sub_resource type="CircleShape2D" id="CircleShape2D_0e48y"]
radius = 53.1601

[node name="Node2D2" type="Node2D"]

[node name="background" type="Sprite2D" parent="."]
visible = false
texture = ExtResource("1_xoq75")

[node name="player" type="CharacterBody2D" parent="."]
script = SubResource("GDScript_y32ns")

[node name="characterGoDown" type="Sprite2D" parent="player"]
position = Vector2(-1, 5)
scale = Vector2(0.30844, 0.29125)
texture = ExtResource("2_ch7qq")

[node name="CollisionShape2D" type="CollisionShape2D" parent="player"]
position = Vector2(0, 14)
shape = SubResource("CircleShape2D_0e48y")

[node name="Camera2D" type="Camera2D" parent="player"]

[node name="characterGoUp" type="Sprite2D" parent="player"]
visible = false
scale = Vector2(0.290467, 0.28)
texture = ExtResource("3_fj2o7")

[node name="characterGoSideways" type="Sprite2D" parent="player"]
visible = false
scale = Vector2(0.36, 0.28)
texture = ExtResource("4_gdeo8")

[node name="ScopeRight" type="Marker2D" parent="player"]
position = Vector2(67, 0)

[node name="ScopeLeft" type="Marker2D" parent="player"]
position = Vector2(-77, 0)
rotation = 3.14159

[node name="ScopeUp" type="Marker2D" parent="player"]
position = Vector2(0, -65)
rotation = 4.71239

[node name="ScopeDown" type="Marker2D" parent="player"]
position = Vector2(0, 77)
rotation = 1.5708
